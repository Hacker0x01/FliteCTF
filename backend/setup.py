import hashlib, json, os, random
import MySQLdb

import time
db = None
for i in xrange(1000):
	try:
		db = MySQLdb.connect(host='localhost', user='root', password='')
		break
	except:
		time.sleep(0.1)
if db is None:
	import sys
	sys.exit(1)
cur = db.cursor()
cur.execute('CREATE DATABASE flitebackend')
cur.execute('USE flitebackend')
cur.execute('CREATE TABLE users (id INT AUTO_INCREMENT PRIMARY KEY, username TEXT, password TEXT)')
cur.execute('CREATE TABLE devices (id INT AUTO_INCREMENT PRIMARY KEY, ip TEXT)')
db.commit()

cur.execute('INSERT INTO users (username, password) VALUES (\'admin\', \'5f4dcc3b5aa765d61d8327deb882cf99\')')
ips = ['104.196.12.98'] + '''10.204.188.183
10.207.243.254
10.90.120.23
10.40.138.80
10.100.66.7
10.249.227.252
10.181.255.67
10.12.158.140
10.116.149.36
10.214.244.159
10.125.47.84
10.222.76.30
10.148.253.200
10.27.78.111
10.17.63.143
10.61.220.85
10.186.74.138
10.225.28.22
10.1.229.21
10.167.137.112
10.14.132.94
10.146.223.103
10.221.110.34
10.2.31.209
10.151.215.76
10.214.53.67
10.245.231.150
10.194.141.238
10.36.197.56
10.79.143.86
10.143.156.45
10.10.167.8
10.18.130.175
10.55.194.248
10.139.17.147
10.141.22.213
10.130.94.9
10.134.79.66
10.164.237.163
10.238.197.83
10.116.174.34
10.90.63.116
10.72.79.175
10.57.174.244
10.181.206.126
10.153.232.69
10.105.35.26
10.176.194.225
10.151.57.107
10.255.68.220
192.88.99.2
192.88.99.90
192.88.99.251
192.88.99.115
192.88.99.59
192.88.99.104
192.88.99.251
192.88.99.153
192.88.99.2
192.88.99.253
192.88.99.55
192.88.99.138
192.88.99.19
192.88.99.230
192.88.99.29
192.88.99.129
192.88.99.249
192.88.99.122
192.88.99.113
192.88.99.104
192.88.99.145
192.88.99.107
192.88.99.239
192.88.99.117
192.88.99.81
192.88.99.162
192.88.99.69
192.88.99.65
192.88.99.137
192.88.99.164
192.88.99.150
192.88.99.189
192.88.99.125
192.88.99.162
192.88.99.180
192.88.99.214
192.88.99.123
192.88.99.158
192.88.99.251
192.88.99.197
192.88.99.23
192.88.99.217
192.88.99.20
192.88.99.184
192.88.99.29
192.88.99.248
192.88.99.145
192.88.99.11
192.88.99.0
192.88.99.252
254.224.153.73
240.27.24.44
249.19.89.193
248.114.7.41
254.82.97.139
250.59.127.153
251.243.170.236
245.224.132.4
244.126.19.72
245.115.147.181
241.161.86.116
244.188.235.4
242.44.164.243
242.99.174.64
253.119.74.127
247.149.233.220
248.104.65.126
247.165.228.82
251.171.125.86
243.42.162.12
244.142.175.122
254.15.165.28
244.16.55.86
251.11.33.68
254.190.236.119
247.30.165.190
240.87.170.223
244.199.12.150
241.8.38.142
248.40.215.226
243.174.48.75
246.91.148.50
246.53.69.214
242.46.162.132
244.119.129.81
243.99.63.239
248.176.208.15
250.96.47.108
245.140.152.230
241.192.235.227
254.113.81.79
243.150.91.235
251.155.214.136
253.200.157.207
247.113.103.121
252.222.76.84
244.181.238.206
250.190.140.78
243.221.130.19
249.241.93.223'''.split('\n')
random.shuffle(ips)
for ip in ips:
	cur.execute('INSERT INTO devices (ip) VALUES (\'%s\')' % ip.replace('\r', ''))

db.commit()

cur.execute("REVOKE file, execute ON *.* FROM 'root'@'localhost'")
db.commit()

cur.close()
